extends layout         

block content        
    div(style={background: '#F3F3F3', 'border-color': '#E7E7E7'}).w-screen.border.border-solid.inline-flex
        // right part of navigation bar
        // logo
        div.bg-white
            img(src='main_logo.png').w-32.mx-6.my-3
        // navigation buttons
        div.inline-flex.space-x-24.mx-24
            button(class='font-medium hover:text-blue-500 hover:drop-shadow-md text-blue-500' onclick='overview(\'' + doctor_name + '\')') Overview
            button(class='font-medium hover:text-blue-500 hover:drop-shadow-md' onclick='patients(\'' + doctor_name + '\')') Patients
            button(class='font-medium hover:text-blue-500 hover:drop-shadow-md') Calendar     
        // left part of navigation bar
        div.inline-flex.ml-auto.grid.grid-cols-2.justify-center.items-center.mx-12
            // dark mode button
            button.inline-flex.h-8.justify-center.items-center.ml-auto(class='hover:text-blue-500 hover:drop-shadow-md' style={'border-width': '0px 2px 0px 0px'})
                img(src='dark mode icon.png')              
                p.mx-2.text-sm Apply Dark Theme
            
            div.inline-flex.h-8.justify-center.items-center.mr-auto.space-x-12.mx-6
                // doctor name
                p.font-bold Dr. #{doctor_name}
                img.rounded-full.border.border-gray-500.w-8.h-8(src='user gray icon.svg')
                // bell sign
                div.inline-flex.relative.w-8.h-8.justify-center
                    img(src='bell.svg').w-8.h-8        
                    div.absolute.bottom-4.left-4.h-5.w-5.border-2.border-white.rounded-full.bg-red-400.z-2.justify-center.items-center
                        p.text-white.font-bold.mx-1(style={'margin-top': '-5px'}) 3
        
    div.w-screen.shadow-lg
        p.text-black.font-bold.text-2xl.mx-4.my-3 Overview

    div(style={background: '#F3F3F3'}).w-screen.inline-flex.h-24
        // buttons
        div.inline-flex.space-x-8.mx-12.justify-center.items-center
            button(class='font-medium hover:text-blue-500 hover:bg-blue-100 hover:drop-shadow-md bg-blue-500 text-white rounded-md py-2 px-4 w-36' onclick='overview(\'' + doctor_name + '\')') Dashboard
            button(class='font-medium hover:text-blue-500 hover:bg-blue-100 hover:drop-shadow-md text-blue-500 border border-2 border-blue-500 rounded-md py-2 px-4 w-36' onclick='income(\'' + doctor_name + '\')') Income
            button(class='font-medium hover:text-blue-500 hover:bg-blue-100 hover:drop-shadow-md text-blue-500 border border-2 border-blue-500 rounded-md py-2 px-4 w-36' onclick='alerts(\'' + doctor_name + '\')') Alerts   
            button(class='font-medium hover:text-blue-500 hover:bg-blue-100 hover:drop-shadow-md text-blue-500 border border-2 border-blue-500 rounded-md py-2 px-4 w-36') Usage     
        // dropdowns 
        div.inline-flex.ml-auto.justify-center.items-center.mx-12
            // year
            div.relative.inline-block.text-left
                div.inline-flex
                    button.justify-center.items-center(type='button' class='inline-flex w-full justify-center px-4 py-2 text-base font-medium text-black hover:text-blue-500' id='menu-button' aria-expanded='true' aria-haspopup='true') Year
                        img.mx-3(src='arrow down icon.png')
            // month
            div.relative.inline-block.text-left
                div.inline-flex
                    button.justify-center.items-center(type='button' class='inline-flex w-full justify-center px-4 py-2 text-base font-medium text-black hover:text-blue-500' id='menu-button' aria-expanded='true' aria-haspopup='true') Month
                        img.mx-3(src='arrow down icon.png')
            // city
            div.relative.inline-block.text-left
                div.inline-flex
                    button.justify-center.items-center(type='button' class='inline-flex w-full justify-center px-4 py-2 text-base font-medium text-black hover:text-blue-500' id='menu-button' aria-expanded='true' aria-haspopup='true') City
                        img.mx-3(src='arrow down icon.png')
            // clinic
            div.relative.inline-block.text-left
                div.inline-flex
                    button.justify-center.items-center(type='button' class='inline-flex w-full justify-center px-4 py-2 text-base font-medium text-black hover:text-blue-500' id='menu-button' aria-expanded='true' aria-haspopup='true') Clinic
                        img.mx-3(src='arrow down icon.png')
                        div.relative.inline-block.text-left
            // category
            div.relative.inline-block.text-left
                div.inline-flex
                    button.justify-center.items-center(type='button' class='inline-flex w-full justify-center px-4 py-2 text-base font-medium text-black hover:text-blue-500' id='menu-button' aria-expanded='true' aria-haspopup='true') Category
                        img.mx-3(src='arrow down icon.png')    
            
            button.justify-center.items-center(class='inline-flex font-medium hover:text-blue-500 hover:bg-blue-100 hover:drop-shadow-md bg-blue-500 text-white rounded-md py-2 px-4 w-28') 
                img(src='export white icon.svg').h-4.mr-auto    
                p Export                                
    // graphs cards
    div(style={background: '#F3F3F3'}).w-screen.inline-flex        
        // System usage
        div.mx-4.mt-6.bg-white.rounded-xl.space-y-5.border.border-solid.shadow-lg(style={'border-color': '#E7E7E7'} class='w-1/4')   
            div.justify-center.items-center.inline.flex  
                p.text-2xl.font-thin.mx-5.mt-5 System usage  
                img(src='export black icon.svg').h-4.ml-auto.mx-5.mt-5  
            p.text-sm.mx-5.my-0.inline-flex Jan 2022 - Jan 2023 /   
                span.font-bold.mx-1 1244 members 
            // graph
            canvas(id='chartSystemUsage').h-96.w-96 
            img(src='bar graph icon.svg').h-4.ml-auto.mx-5
            // labels
            div.flex.border.border-gray-100.m-3(style={'border-width': '2px 0px 0px 0px'})
            div.inline.m-3
                div.flow-root.inline.m-3
                    div.float-left.inline-flex
                        div.left-4.h-5.w-5.rounded-md(style={background: 'rgba(255,171,109,1)'})
                        p.text-sm.mx-3 Weeks 1-2
                    div.float-right.inline-flex
                        div.right-4.h-5.w-5.rounded-md(style={background: 'rgba(215,202,42,1)'})
                        p.text-sm.mx-3 Weeks 3-4
            div.inline.m-3
                div.flow-root.inline.m-3
                    div.float-left.inline-flex
                        div.left-4.h-5.w-5.rounded-md(style={background: 'rgba(237,133,223,1)'})
                        p.text-sm.mx-3 Weeks 5-6
                    div.float-right.inline-flex
                        div.right-4.h-5.w-5.rounded-md(style={background: 'rgba(117,73,200,1)'})
                        p.text-sm.mx-3 Weeks 7-8

        // Abnormal alerts
        div.mx-4.mt-6.bg-white.rounded-xl.space-y-5.border.border-solid.shadow-lg(style={'border-color': '#E7E7E7'} class='w-1/4')   
            div.justify-center.items-center.inline.flex  
                p.text-2xl.font-thin.mx-5.mt-5 Abnormal alerts  
                img(src='export black icon.svg').h-4.ml-auto.mx-5.mt-5  
            p.text-sm.mx-5.my-0.inline-flex Jan 2022 - Jan 2023 /   
                span.font-bold.mx-1 72 alerts 
            // graph
            canvas(id='chartAbnormalAlerts').h-96.w-96 
            img(src='bar graph icon.svg').h-4.ml-auto.mx-5
            // labels
            div.flex.border.border-gray-100.m-3(style={'border-width': '2px 0px 0px 0px'})
            div.inline.m-3
                div.flow-root.inline.m-3
                    div.float-left.inline-flex
                        div.left-4.h-5.w-5.rounded-md(style={background: 'rgba(195,215,42,1)'})
                        p.text-sm.mx-3 Blood Pressure
                    div.float-right.inline-flex
                        div.right-4.h-5.w-5.rounded-md(style={background: 'rgba(159,160,208,1)'})
                        p.text-sm.mx-3 Blood oxygen level
            div.inline.m-3
                div.flow-root.inline.m-3
                    div.float-left.inline-flex
                        div.left-4.h-5.w-5.rounded-md(style={background: 'rgba(200,73,151,1)'})
                        p.text-sm.mx-3 Pulse                    

        // Subscriptions and revenue
        div.mx-4.mt-6.bg-white.rounded-xl.space-y-5.border.border-solid.shadow-lg(style={'border-color': '#E7E7E7'} class='w-1/2')   
            div.justify-center.items-center.inline.flex  
                p.text-2xl.font-thin.mx-5.mt-5 Subscriptions and revenue  
                img(src='export black icon.svg').h-4.ml-auto.mx-5.mt-5  
            
            // graph
            div(style={position: 'relative', height: '360px'})
                canvas(id='chartSubscriptionsAndRevenue').px-6          
            
            // labels
            div.px-6.pb-6
                div.inline
                    div.inline-flex
                        div.left-4.h-5.w-5.rounded-md(style={background: 'rgba(26,115,232,1)'})
                        p.text-sm.mx-3 Subscriptions
                    div.inline-flex
                        div.right-4.h-5.w-5.rounded-md(style={background: 'rgba(195,215,42,1)'})
                        p.text-sm.mx-3 Revenue
            
    div(style={background: '#F3F3F3'}).w-screen.inline-flex   
        // Income
        div.mx-4.mt-6.bg-white.rounded-xl.space-y-5.border.border-solid.shadow-lg(style={'border-color': '#E7E7E7'} class='w-1/2')   
            div.justify-center.items-center.inline.flex
                p.text-2xl.font-thin.mx-5.mt-5 Income
                img(src='export black icon.svg').h-4.ml-auto.mx-5.mt-5  
            p.text-sm.mx-5 Jan 2022 - Jan 2023

            div.justify-center.items-center.inline.flex
                div.justify-center.items-center
                    p.mx-5.justify-center.items-center.flex.text-4xl.font-medium $180,160 
                    p.mx-5.justify-center.items-center.flex Last month
                div.justify-center.items-center
                    p.mx-5.justify-center.items-center.flex.text-4xl.font-medium $769,300 
                    p.mx-5.justify-center.items-center.flex Last 12 months                    
                  
            // graph
            div(style={position: 'relative', height: '200px'})
                canvas(id='chartIncome').px-6          
            
            // labels
            div.px-6.pb-6
                div.inline
                    div.inline-flex
                        div.left-4.h-5.w-5.rounded-md(style={background: 'rgba(44,130,190,1)'})
                        p.text-sm.mx-3 Existing members
                    div.inline-flex
                        div.right-4.h-5.w-5.rounded-md(style={background: 'rgba(103,218,251,1)'})
                        p.text-sm.mx-3 New members    

        // Clients
        div.mx-4.mt-6.bg-white.rounded-xl.space-y-5.border.border-solid.shadow-lg(style={'border-color': '#E7E7E7'} class='w-1/2')   
            div.justify-center.items-center.inline.flex
                p.text-2xl.font-thin.mx-5.mt-5 Clients
                img(src='export black icon.svg').h-4.ml-auto.mx-5.mt-5  
            p.text-sm.mx-5 Jan 2022 - Jan 2023

            div.justify-center.items-center.inline.flex
                div.justify-center.items-center
                    p.mx-5.justify-center.items-center.flex.text-4xl.font-medium 1350 
                    p.mx-5.justify-center.items-center.flex Last month
                div.justify-center.items-center
                    p.mx-5.justify-center.items-center.flex.text-4xl.font-medium 4352 
                    p.mx-5.justify-center.items-center.flex Last 12 months                    
                  
            // graph
            div(style={position: 'relative', height: '200px'})
                canvas(id='chartClients').px-6          
            
            // labels
            div.px-6.pb-6
                div.inline
                    div.inline-flex
                        div.left-4.h-5.w-5.rounded-md(style={background: 'rgba(117,73,200,1)'})
                        p.text-sm.mx-3 Existing members
                    div.inline-flex
                        div.right-4.h-5.w-5.rounded-md(style={background: 'rgba(255,171,109,1)'})
                        p.text-sm.mx-3 New members       


    script.
        const dataSystemUsage = {datasets: [{data: [18, 40, 22, 20], backgroundColor: ['rgba(255,171,109,1)', 'rgba(215,202,42,1)', 'rgba(237,133,223,1)', 'rgba(117,73,200,1)'], hoverOffset: 4}]}
        const configSystemUsage = {
            type: 'doughnut', data: dataSystemUsage, 
            options: {
                tooltips: {
                    enabled: false
                },
                plugins: {
                    datalabels: {
                        formatter: (value, ctxSystemUsage) => {
                            let sum = ctxSystemUsage.dataset._meta[0].total
                            let percentage = (value * 100 / sum).toFixed(0) + '%'
                            return percentage
                        },
                        color: '#fff',
                    },
                    outlabels: {
                        display: false
                    }
                }
            }
        }
        var ctxSystemUsage = document.getElementById('chartSystemUsage').getContext('2d');
        var chartBarSystemUsage = new Chart(ctxSystemUsage, configSystemUsage )

        const dataAbnormalAlerts = {datasets: [{data: [50, 40, 10], backgroundColor: ['rgba(195,215,42,1)', 'rgba(159,160,208,1)', 'rgba(200,73,151,1)'], hoverOffset: 4}]}
        const configAbnormalAlerts = {
            type: 'doughnut', data: dataAbnormalAlerts, 
            options: {
                tooltips: {
                    enabled: false
                },
                plugins: {
                    datalabels: {
                        formatter: (value, ctxAbnormalAlerts) => {
                            let sum = ctxAbnormalAlerts.dataset._meta[1].total
                            let percentage = (value * 100 / sum).toFixed(0) + '%'
                            return percentage
                        },
                        color: '#fff',
                    },
                    outlabels: {
                        display: false
                    }
                }
            }
        }
        var ctxAbnormalAlerts = document.getElementById('chartAbnormalAlerts').getContext('2d');
        var chartBarAbnormalAlerts = new Chart(ctxAbnormalAlerts, configAbnormalAlerts )

        const labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        const dataSubscriptionsAndRevenue = {
            labels: labels,
            datasets: [
                {
                    data: [4, 3, 4, 5, 3, 4, 3, 5, 3, 6, 5, 5], borderColor: ['rgba(26,115,232,1)'], hoverOffset: 4, fill: false
                },
                {
                    data: [5, 4, 5, 3, 3, 8, 6, 7, 5, 4, 3, 3], borderColor: ['rgba(195,215,42,1)'], hoverOffset: 4, fill: false
                }
            ]
        }        
        const configSubscriptionsAndRevenue = {
            type: 'line', data: dataSubscriptionsAndRevenue, 
            options: {
                responsive: true,
                maintainAspectRatio: false,
                legend: {display: false},
                plugins: {
                    datalabels: {
                        display: false,
                    },
                },
                elements: {
                    point:{
                        radius: 0
                    },
                    line: {
                        tension: 0
                    }
                },
                tooltips: {
                    enabled: false
                },
                scales: {
                    yAxes: [{                                            
                        stacked: false,                        
                        gridLines: {
                            display:true
                        },
                        ticks: {
                            min: 1,                            
                            max: 9, 
                            callback: function(val, index) {
                                return val + 'k'
                            }                                            
                        },
                                                                                                           
                    }],
                    xAxes: [{
                        stacked: false,
                        gridLines: {
                            display:false
                        }
                    }]
                }
            }
        }
        var ctxSubscriptionsAndRevenue = document.getElementById('chartSubscriptionsAndRevenue').getContext('2d')
        var chartBarSubscriptionsAndRevenue = new Chart(ctxSubscriptionsAndRevenue, configSubscriptionsAndRevenue )

        const dataIncome = {
            labels: labels,
            datasets: [
                {
                    data: [3, 2, 1, 2, 1, 2, 3, 2, 1, 3, 2, 1], backgroundColor: 'rgba(44,130,190,1)', hoverOffset: 4, fill: false
                },
                {
                    data: [1, 2, 3, 3, 2, 4, 3, 2, 1, 1, 2, 3], backgroundColor: 'rgba(103,218,251,1)', hoverOffset: 4, fill: false
                }
            ]
        }        
        const configIncome = {
            type: 'bar', 
            data: dataIncome, 
            options: {
                responsive: true,
                maintainAspectRatio: false,
                legend: {display: false},
                plugins: {
                    datalabels: {
                        display: false,
                    },
                },
                elements: {
                    point:{
                        radius: 0
                    },
                    line: {
                        tension: 0
                    }
                },
                tooltips: {
                    enabled: false
                },
                scales: {
                    yAxes: [{                                            
                        stacked: false,                        
                        gridLines: {
                            display: false
                        },
                        ticks: {
                            display: false //this will remove only the label
                        }                                                                                                       
                    }],
                    xAxes: [{
                        stacked: false,
                        gridLines: {
                            display: false
                        }
                    }]
                }
            }
        }
        var ctxIncome = document.getElementById('chartIncome').getContext('2d')
        var chartBarIncome = new Chart(ctxIncome, configIncome )

        const dataClients = {
            labels: labels,
            datasets: [
                {
                    data: [3, 2, 1, 2, 1, 2, 3, 2, 1, 3, 2, 1], backgroundColor: 'rgba(117,73,200,1)', hoverOffset: 4, fill: false
                },
                {
                    data: [1, 2, 3, 3, 2, 4, 3, 2, 1, 1, 2, 3], backgroundColor: 'rgba(255,171,109,1)', hoverOffset: 4, fill: false
                }
            ]
        }        
        const configClients = {
            type: 'bar', 
            data: dataClients, 
            options: {
                responsive: true,
                maintainAspectRatio: false,
                legend: {display: false},
                plugins: {
                    datalabels: {
                        display: false,
                    },
                },
                elements: {
                    point:{
                        radius: 0
                    },
                    line: {
                        tension: 0
                    }
                },
                tooltips: {
                    enabled: false
                },
                scales: {
                    yAxes: [{                                            
                        stacked: false,                        
                        gridLines: {
                            display: false
                        },
                        ticks: {
                            display: false //this will remove only the label
                        }                                                                                                       
                    }],
                    xAxes: [{
                        stacked: false,
                        gridLines: {
                            display: false
                        }
                    }]
                }
            }
        }
        var ctxClients = document.getElementById('chartClients').getContext('2d')
        var chartBarClients = new Chart(ctxClients, configClients )

        function overview(doctor_name)
        {            
            window.location.href = './home_doctor?doctor_name=' + doctor_name   
        } 
        
        function income(doctor_name)
        {
            window.location.href = './income?doctor_name=' + doctor_name 
        } 

        function alerts(doctor_name)
        {
            window.location.href = './alerts?doctor_name=' + doctor_name 
        } 
        
        function patients(doctor_name)
        {
            window.location.href = './patients?doctor_name=' + doctor_name 
        } 
